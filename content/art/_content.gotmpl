{{ range readDir "/data/art" }}
    {{ $file := readFile (printf "/data/art/%s" .Name) }}
    {{ $data := unmarshal $file }}
    {{ $name := .Name }}
    {{ $ext := $data.extension }}
    {{ $basename := strings.TrimSuffix (path.Ext .Name) .Name }}
    {{ $title := $data.title }}
    {{ $content := dict "mediaType" "text/markdown" "value" $data.description }}
    {{ $params := dict "extension" $ext "basename" $basename }}
    {{ $page := dict "content" $content "params" $params "path" $basename "title" $title "layout" "art-single" }}
    {{ $.AddPage $page }}
    {{ with resources.Get $data.file }}
        {{ $content := dict "mediaType" .MediaType.Type "value" .Content }}
        {{ $resource := dict "content" $content "path" (printf "%s/image.%s" $basename .MediaType.SubType) }}
        {{ $.AddResource $resource }}
    {{ end }}
{{ end }}